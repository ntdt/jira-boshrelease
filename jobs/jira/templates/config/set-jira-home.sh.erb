JIRA_HOME=/var/vcap/store/jira/home
# One way to set the JIRA_HOME path is here via this variable.  Simply uncomment it and set a valid path like
# /jira/home.  You can of course set it outside in the command terminal; that will also work.
#
if [ -z "$JIRA_HOME" ]; then
    JIRA_HOME=
fi

# When upgrading from the packaged distribution JIRA_HOME may not be set. Fallback to legacy STASH_HOME
# and output a message for the user recommending that they update their environment
if [ -z "$JIRA_HOME" ]; then
    if [ -z "$STASH_HOME" ]; then
        echo "jira doesn't know where to store its data. Configure the JIRA_HOME"
        echo "environment variable with the directory where jira should store its data."
        echo "Ensure the path to JIRA_HOME does not contain spaces. JIRA_HOME may"
        echo "be configured in set-jira-home.sh, if preferred, rather than exporting it"
        echo "as an environment variable"
        return 1
    else
        JIRA_HOME=$STASH_HOME
        echo "WARNING: STASH_HOME has been deprecated and replaced with JIRA_HOME. It"
        echo "is recommended to set JIRA_HOME instead of STASH_HOME. Future versions"
        echo -e "of jira may not support the STASH_HOME variable\n"
    fi
fi

echo $JIRA_HOME | grep -q " "
if [ $? -eq 0 ]; then
    echo "JIRA_HOME '$JIRA_HOME' contains spaces."
    echo "Using a directory with spaces is likely to cause unexpected behaviour and is not"
    echo "supported. Set JIRA_HOME to a directory which does not contain spaces"
    return 1
fi

export JIRA_HOME

